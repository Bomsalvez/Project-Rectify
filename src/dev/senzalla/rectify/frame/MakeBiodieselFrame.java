package dev.senzalla.rectify.frame;

import dev.senzalla.rectify.entitys.Tank;
import dev.senzalla.rectify.frame.panel.MatterPanel;
import dev.senzalla.rectify.frame.panel.ReactionBiodieselPanel;
import dev.senzalla.rectify.treatments.*;
import dev.senzalla.theme.TreatmentTheme;

import javax.swing.*;
import java.util.ArrayList;
import java.util.List;

/**
 * @author Bomsalvez Freitas
 * @e-mail bomsalvez@gmail.com
 * @github github.com/Bomsalvez
 */
public class MakeBiodieselFrame extends javax.swing.JInternalFrame {

    private int countMatter;
    private int countReact;
    private BoxLayout layoutMatter;
    private BoxLayout layoutReact;
    private List<MatterPanel> pnlMatter;
    private List<ReactionBiodieselPanel> pnlReact;

    /**
     * Creates new form FrmTrans
     */
    public MakeBiodieselFrame() {
        initComponents();
        TreatmentTheme.initTheme(pnlTrans);
        initContainers();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        roll = new javax.swing.JScrollPane();
        pnlTrans = new javax.swing.JPanel();
        lblTitle = new javax.swing.JLabel();
        lblTank = new javax.swing.JLabel();
        cbxTank = new javax.swing.JComboBox<>();
        pnlMatterTrans = new javax.swing.JPanel();
        btnMatterTransAdd = new javax.swing.JButton();
        btnMatterTransRmv = new javax.swing.JButton();
        lblEsterAmount = new javax.swing.JLabel();
        txtAmount = new javax.swing.JFormattedTextField();
        pnlReactTrans = new javax.swing.JPanel();
        btnReactTransAdd = new javax.swing.JButton();
        btnReactTransRmv = new javax.swing.JButton();
        lblEsterTrash = new javax.swing.JLabel();
        txtTrash = new javax.swing.JFormattedTextField();
        lblEsterProduced = new javax.swing.JLabel();
        txtProduced = new javax.swing.JFormattedTextField();
        btnEsterSave = new javax.swing.JButton();
        btnEsterClear = new javax.swing.JButton();
        btnEsterCancel = new javax.swing.JButton();

        setClosable(true);
        setMaximumSize(new java.awt.Dimension(1000, 680));
        setMinimumSize(new java.awt.Dimension(1000, 680));
        setPreferredSize(new java.awt.Dimension(1000, 680));

        roll.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        roll.setMaximumSize(new java.awt.Dimension(990, 32767));
        roll.setMinimumSize(new java.awt.Dimension(990, 658));
        roll.setPreferredSize(new java.awt.Dimension(990, 658));
        roll.addMouseWheelListener(new java.awt.event.MouseWheelListener() {
            public void mouseWheelMoved(java.awt.event.MouseWheelEvent evt) {
                rollMouseWheelMoved(evt);
            }
        });

        lblTitle.setFont(new java.awt.Font("Dialog", 1, 30)); // NOI18N
        lblTitle.setText("Transesterificação");

        lblTank.setFont(new java.awt.Font("Dialog", 1, 18)); // NOI18N
        lblTank.setText("Tanque");

        cbxTank.setFont(new java.awt.Font("Dialog", 1, 18)); // NOI18N

        pnlMatterTrans.setLayout(new javax.swing.BoxLayout(pnlMatterTrans, javax.swing.BoxLayout.Y_AXIS));

        btnMatterTransAdd.setFont(new java.awt.Font("Dialog", 1, 20)); // NOI18N
        btnMatterTransAdd.setText("Adicionar Produto");
        btnMatterTransAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnMatterTransAddActionPerformed(evt);
            }
        });

        btnMatterTransRmv.setFont(new java.awt.Font("Dialog", 1, 20)); // NOI18N
        btnMatterTransRmv.setText("Eliminar Produto");
        btnMatterTransRmv.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnMatterTransRmvActionPerformed(evt);
            }
        });

        lblEsterAmount.setFont(new java.awt.Font("Dialog", 1, 18)); // NOI18N
        lblEsterAmount.setText("Quantidade Total");

        txtAmount.setEditable(false);
        txtAmount.setBackground(new java.awt.Color(69, 73, 74));
        txtAmount.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0"))));
        txtAmount.setFocusable(false);
        txtAmount.setFont(new java.awt.Font("Dialog", 0, 18)); // NOI18N
        txtAmount.setPreferredSize(new java.awt.Dimension(120, 32));

        pnlReactTrans.setLayout(new javax.swing.BoxLayout(pnlReactTrans, javax.swing.BoxLayout.LINE_AXIS));

        btnReactTransAdd.setFont(new java.awt.Font("Dialog", 1, 20)); // NOI18N
        btnReactTransAdd.setText("Adicionar Reação");
        btnReactTransAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnReactTransAddActionPerformed(evt);
            }
        });

        btnReactTransRmv.setFont(new java.awt.Font("Dialog", 1, 20)); // NOI18N
        btnReactTransRmv.setText("Eliminar Reação");
        btnReactTransRmv.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnReactTransRmvActionPerformed(evt);
            }
        });

        lblEsterTrash.setFont(new java.awt.Font("Dialog", 1, 18)); // NOI18N
        lblEsterTrash.setText("Residuo");

        txtTrash.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0"))));
        txtTrash.setFont(new java.awt.Font("Dialog", 0, 18)); // NOI18N
        txtTrash.setPreferredSize(new java.awt.Dimension(100, 32));

        lblEsterProduced.setFont(new java.awt.Font("Dialog", 1, 18)); // NOI18N
        lblEsterProduced.setText("Total Produzido");

        txtProduced.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0"))));
        txtProduced.setFont(new java.awt.Font("Dialog", 0, 18)); // NOI18N
        txtProduced.setPreferredSize(new java.awt.Dimension(100, 32));

        btnEsterSave.setFont(new java.awt.Font("Dialog", 1, 20)); // NOI18N
        btnEsterSave.setText("Salvar");
        btnEsterSave.setPreferredSize(new java.awt.Dimension(120, 60));
        btnEsterSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEsterSaveActionPerformed(evt);
            }
        });

        btnEsterClear.setFont(new java.awt.Font("Dialog", 1, 20)); // NOI18N
        btnEsterClear.setText("Limpar");
        btnEsterClear.setPreferredSize(new java.awt.Dimension(120, 60));
        btnEsterClear.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEsterClearActionPerformed(evt);
            }
        });

        btnEsterCancel.setFont(new java.awt.Font("Dialog", 1, 20)); // NOI18N
        btnEsterCancel.setText("Cancelar");
        btnEsterCancel.setPreferredSize(new java.awt.Dimension(120, 60));
        btnEsterCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEsterCancelActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout pnlTransLayout = new javax.swing.GroupLayout(pnlTrans);
        pnlTrans.setLayout(pnlTransLayout);
        pnlTransLayout.setHorizontalGroup(
            pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlTransLayout.createSequentialGroup()
                .addGap(171, 171, 171)
                .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                        .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(pnlTransLayout.createSequentialGroup()
                                .addComponent(lblEsterAmount)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtAmount, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(pnlTransLayout.createSequentialGroup()
                                .addGap(53, 53, 53)
                                .addComponent(lblEsterTrash)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtTrash, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(107, 107, 107)
                                .addComponent(lblEsterProduced)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(txtProduced, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGroup(pnlTransLayout.createSequentialGroup()
                            .addComponent(btnEsterSave, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(62, 62, 62)
                            .addComponent(btnEsterClear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(62, 62, 62)
                            .addComponent(btnEsterCancel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(pnlTransLayout.createSequentialGroup()
                        .addComponent(btnReactTransAdd, javax.swing.GroupLayout.PREFERRED_SIZE, 249, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 104, Short.MAX_VALUE)
                        .addComponent(btnReactTransRmv, javax.swing.GroupLayout.PREFERRED_SIZE, 278, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(pnlTransLayout.createSequentialGroup()
                        .addGap(75, 75, 75)
                        .addComponent(lblTank)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(cbxTank, javax.swing.GroupLayout.PREFERRED_SIZE, 392, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(pnlTransLayout.createSequentialGroup()
                        .addComponent(btnMatterTransAdd, javax.swing.GroupLayout.PREFERRED_SIZE, 249, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(btnMatterTransRmv, javax.swing.GroupLayout.PREFERRED_SIZE, 278, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(309, 309, 309))
            .addGroup(pnlTransLayout.createSequentialGroup()
                .addGap(360, 360, 360)
                .addComponent(lblTitle)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnlTransLayout.createSequentialGroup()
                .addGap(102, 102, 102)
                .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(pnlReactTrans, javax.swing.GroupLayout.DEFAULT_SIZE, 770, Short.MAX_VALUE)
                    .addComponent(pnlMatterTrans, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(239, 239, 239))
        );
        pnlTransLayout.setVerticalGroup(
            pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlTransLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(lblTitle)
                .addGap(30, 30, 30)
                .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblTank)
                    .addComponent(cbxTank, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(24, 24, 24)
                .addComponent(pnlMatterTrans, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(27, 27, 27)
                .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnMatterTransAdd)
                    .addComponent(btnMatterTransRmv))
                .addGap(24, 24, 24)
                .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblEsterAmount)
                    .addComponent(txtAmount, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(24, 24, 24)
                .addComponent(pnlReactTrans, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(24, 24, 24)
                .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnReactTransAdd)
                    .addComponent(btnReactTransRmv))
                .addGap(27, 27, 27)
                .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblEsterTrash)
                    .addComponent(txtTrash, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblEsterProduced)
                    .addComponent(txtProduced, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(pnlTransLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnEsterClear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnEsterCancel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnEsterSave, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(35, 35, 35))
        );

        roll.setViewportView(pnlTrans);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(roll, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(roll, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents


    private void rollMouseWheelMoved(java.awt.event.MouseWheelEvent evt) {//GEN-FIRST:event_rollMouseWheelMoved
        ItemTreatment.speedRoll(roll);
    }//GEN-LAST:event_rollMouseWheelMoved

    private void btnMatterTransAddActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnMatterTransAddActionPerformed
        if (countMatter <= 1) {
            defineButton(btnMatterTransRmv, true);
        } else if (countMatter >= 6) {
            defineButton(btnMatterTransAdd, false);
        }
        addPanelMatter();
    }//GEN-LAST:event_btnMatterTransAddActionPerformed

    private void btnMatterTransRmvActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnMatterTransRmvActionPerformed
        pnlMatter.get(--countMatter).minusLitters();
        if (countMatter <= 1) {
            defineButton(btnMatterTransRmv, false);
        } else if (countMatter <= 6) {
            defineButton(btnMatterTransAdd, true);
        }
        pnlMatter.get(countMatter).setVisible(false);
        pnlMatter.remove(countMatter);
    }//GEN-LAST:event_btnMatterTransRmvActionPerformed

    private void btnReactTransAddActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnReactTransAddActionPerformed
        if (countReact <= 1) {
            defineButton(btnReactTransRmv, true);
        } else if (countReact >= 6) {
            defineButton(btnReactTransAdd, false);
        }
        addPanelReact();
    }//GEN-LAST:event_btnReactTransAddActionPerformed

    private void btnReactTransRmvActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnReactTransRmvActionPerformed
        countReact--;
        if (countReact <= 1) {
            defineButton(btnReactTransRmv, false);
        } else if (countReact <= 6) {
            defineButton(btnReactTransAdd, true);
        }
        this.pnlReact.get(countReact).setVisible(false);
        this.pnlReact.remove(countReact);
    }//GEN-LAST:event_btnReactTransRmvActionPerformed

    private void btnEsterSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEsterSaveActionPerformed
        boolean matter = checkMatter();
        boolean react = checkReact();
        if (matter && react && TxtTreatment.isTextFieldEmpty(pnlTrans)) {
            new MakeBiodieselTreatment().saveMakeBiodiesel((Tank) cbxTank.getSelectedItem(), txtAmount.getText(), txtProduced.getText(), txtTrash.getText(), pnlReact.get(0).getDate());
            pnlMatter.forEach(MatterPanel::saveMatter);
            pnlReact.forEach(ReactionBiodieselPanel::saveReact);
            Access.goToInternalFrame(this, new MakeBiodieselFrame());

        } else {
            PopUp.fieldIsEmpty();
        }
    }//GEN-LAST:event_btnEsterSaveActionPerformed

    private void btnEsterClearActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEsterClearActionPerformed
       Access.goToInternalFrame(this, new MakeBiodieselFrame());
    }//GEN-LAST:event_btnEsterClearActionPerformed

    private void btnEsterCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEsterCancelActionPerformed
        this.dispose();
    }//GEN-LAST:event_btnEsterCancelActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnEsterCancel;
    private javax.swing.JButton btnEsterClear;
    private javax.swing.JButton btnEsterSave;
    private javax.swing.JButton btnMatterTransAdd;
    private javax.swing.JButton btnMatterTransRmv;
    private javax.swing.JButton btnReactTransAdd;
    private javax.swing.JButton btnReactTransRmv;
    private javax.swing.JComboBox<Object> cbxTank;
    private javax.swing.JLabel lblEsterAmount;
    private javax.swing.JLabel lblEsterProduced;
    private javax.swing.JLabel lblEsterTrash;
    private javax.swing.JLabel lblTank;
    private javax.swing.JLabel lblTitle;
    private javax.swing.JPanel pnlMatterTrans;
    private javax.swing.JPanel pnlReactTrans;
    private javax.swing.JPanel pnlTrans;
    private javax.swing.JScrollPane roll;
    private javax.swing.JFormattedTextField txtAmount;
    private javax.swing.JFormattedTextField txtProduced;
    private javax.swing.JFormattedTextField txtTrash;
    // End of variables declaration//GEN-END:variables

    private void initPanelMatter() {
        this.layoutMatter = new BoxLayout(pnlMatterTrans, 1);
        this.pnlMatter = new ArrayList<>();
        addPanelMatter();

    }

    private void addPanelMatter() {
        MatterPanel panel = new MatterPanel(txtAmount, countMatter++);
        this.pnlMatterTrans.setLayout(layoutMatter);
        this.pnlMatter.add(panel);
        this.pnlMatterTrans.add(panel).setVisible(true);
    }

    private void initPanelReact() {
        this.layoutReact = new BoxLayout(pnlReactTrans, 1);
        this.pnlReact = new ArrayList<>();
        addPanelReact();
    }

    private void addPanelReact() {
        ReactionBiodieselPanel panel = new ReactionBiodieselPanel(this);
        this.pnlReactTrans.setLayout(layoutReact);
        this.pnlReact.add(panel);
        this.pnlReactTrans.add(panel).setVisible(true);
        this.countReact++;
    }

    private void defineButton(JButton btn, boolean b) {
        btn.setEnabled(b);
        btn.setVisible(b);
    }

    private void initContainers() {
        initPanelMatter();
        initPanelReact();
        defineButton(btnMatterTransRmv, false);
        defineButton(btnReactTransRmv, false);

        TankTreatment.initComboBox(cbxTank);
        PnlMatterTreatment.initEster();
    }

    private boolean checkMatter() {
        return pnlMatter.stream().anyMatch(pnl -> TxtTreatment.isTextFieldEmpty(pnl.getPanel()) || ComboBoxTreatment.isCbxEmpty(pnl.getPanel()));
    }

    private boolean checkReact() {
        return pnlReact.stream().anyMatch(pnl -> TxtTreatment.isTextFieldEmpty(pnl.getNamePanel()) && ComboBoxTreatment.isCbxEmpty(pnl.getNamePanel()) && DateChooserTreatment.isDateChooserNull(pnl.getNamePanel()));
    }

    public Tank getTank() {
        if (cbxTank.getSelectedIndex() > 0) {
            return (Tank) cbxTank.getSelectedItem();
        }
        return null;
    }
}
